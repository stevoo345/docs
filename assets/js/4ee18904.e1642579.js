"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[889],{6463:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"gitlab/add-runner","title":"Add Runner to Gitlab","description":"Connect git with gitlab","source":"@site/docs/gitlab/add-runner.md","sourceDirName":"gitlab","slug":"/gitlab/add-runner","permalink":"/docs/gitlab/add-runner","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Gitlab","permalink":"/docs/category/gitlab"},"next":{"title":"Plex","permalink":"/docs/category/plex"}}');var t=r(4848),a=r(8453);const i={},d="Add Runner to Gitlab",s={},o=[{value:"Connect git with gitlab",id:"connect-git-with-gitlab",level:2},{value:"Install Gitlab Runner",id:"install-gitlab-runner",level:2},{value:"Download Gitlab Runner",id:"download-gitlab-runner",level:2},{value:"Make Gitlab Runner Executable",id:"make-gitlab-runner-executable",level:2},{value:"Add Gitlab Runner user",id:"add-gitlab-runner-user",level:2},{value:"Install gitlab runner",id:"install-gitlab-runner-1",level:2},{value:"Start Gitlab Runner",id:"start-gitlab-runner",level:2},{value:"Register Gitlab Runner",id:"register-gitlab-runner",level:2},{value:"(Optional) Show Gitlab Runner Config File",id:"optional-show-gitlab-runner-config-file",level:3},{value:"Add Gitlab Runner to docker group",id:"add-gitlab-runner-to-docker-group",level:2},{value:"Check for docker group.",id:"check-for-docker-group",level:3},{value:"Add User to docker group.",id:"add-user-to-docker-group",level:3},{value:"Restart Gitlab Runner.",id:"restart-gitlab-runner",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"add-runner-to-gitlab",children:"Add Runner to Gitlab"})}),"\n",(0,t.jsx)(n.h2,{id:"connect-git-with-gitlab",children:"Connect git with gitlab"}),"\n",(0,t.jsx)(n.p,{children:"Get SSH key from docker container."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cat ~/.ssh/id_ed25519.pub\n"})}),"\n",(0,t.jsx)(n.p,{children:"Gitlab -> Settings -> SSH Keys -> Add new Key"}),"\n",(0,t.jsx)(n.h2,{id:"install-gitlab-runner",children:"Install Gitlab Runner"}),"\n",(0,t.jsx)(n.p,{children:"Project -> Settings -> CI/CD -> Runners -> Create project runner"}),"\n",(0,t.jsx)(n.h2,{id:"download-gitlab-runner",children:"Download Gitlab Runner"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64\n"})}),"\n",(0,t.jsx)(n.h2,{id:"make-gitlab-runner-executable",children:"Make Gitlab Runner Executable"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo chmod +x /usr/local/bin/gitlab-runner\n"})}),"\n",(0,t.jsx)(n.h2,{id:"add-gitlab-runner-user",children:"Add Gitlab Runner user"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash\n"})}),"\n",(0,t.jsx)(n.h2,{id:"install-gitlab-runner-1",children:"Install gitlab runner"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner\n"})}),"\n",(0,t.jsx)(n.h2,{id:"start-gitlab-runner",children:"Start Gitlab Runner"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo gitlab-runner start\n"})}),"\n",(0,t.jsx)(n.h2,{id:"register-gitlab-runner",children:"Register Gitlab Runner"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"gitlab-runner register  --url https://gitlab.com  --token token\n"})}),"\n",(0,t.jsx)(n.h3,{id:"optional-show-gitlab-runner-config-file",children:"(Optional) Show Gitlab Runner Config File"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cat /etc/gitlab-runner/config.toml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"add-gitlab-runner-to-docker-group",children:"Add Gitlab Runner to docker group"}),"\n",(0,t.jsx)(n.h3,{id:"check-for-docker-group",children:"Check for docker group."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"grep docker /etc/group\n"})}),"\n",(0,t.jsx)(n.h3,{id:"add-user-to-docker-group",children:"Add User to docker group."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"usermod -aG docker gitlab-runner\n"})}),"\n",(0,t.jsx)(n.h3,{id:"restart-gitlab-runner",children:"Restart Gitlab Runner."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"systemctl restart gitlab-runner\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>d});var l=r(6540);const t={},a=l.createContext(t);function i(e){const n=l.useContext(a);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),l.createElement(a.Provider,{value:n},e.children)}}}]);